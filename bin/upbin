#!/usr/bin/env bash
# 20191229 - update home's bin directory
#          - if given argument, update that packages symlinks
configdir=$(dirname $(readlink -f $0))/..
[ $# -eq 0 ] && pkg=bin || pkg="$1"
[ ! -d $configdir ] &&
    echo "no stow package $pkg in $configdir! $(find $configdir -maxdepth 1 -type f)" &&
    exit 1

# N.B. $pkg from outside function scope
stowto() { test -d $1 || mkdir $1; stow -d $configdir -t $1 $pkg; }

# make sure we're up-to-date
cd $configdir
git pull 

case $pkg in
  # in there own place
  bin)   stowto ~/bin;;
  emacs) stowto ~/.emacs.d;;
  # inside ~
  vim|xbindkeys|x11|R|i3|easystroke) stowto ~;;
  # inside ~/.config
  kitty) stowto ~/.config/$pkg;;
  # where dynamic-colors-git archlinux package will look
  dynamic-colors) stowto /usr/share/dynamic-colors/colorschemes;;
  kitty|keepmenu) stowto ~/.config/$pkg;;
  *) echo "$pkg not defined in $0"; exit 1;;
esac


